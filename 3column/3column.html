<!DOCTYPE html>
<!--https://www.facebookbrand.com/-->
<html>
<head>
    <meta charset="utf-8">
    <title>Fakebook</title>
    <link rel="stylesheet" type="text/css" href="3column.css">
    
    <script>
        document.addEventListener("DOMContentLoaded", function(){
            
            while(scrollLoad.checkScroll()){
                scrollLoad.loadByScroll();
            }
            
            document.addEventListener("scroll", function(){
                if(scrollLoad.checkScroll()){
                    scrollLoad.loadByScroll();
                }
            });
            
            document.querySelector("main").addEventListener("click", function(e){
                if(e.target.classList.contains("likeBtn")){
                    
                    if(e.target.classList.contains("blue")){
                        e.target.classList.toggle("blue");
                        var showLike = e.target.parentNode.parentNode.querySelector(".showLike")
                        console.log(showLike);
                        var targetLike = parseInt(showLike.getAttribute("data-like"));
                        showLike.setAttribute("data-like", targetLike-1);
                        showLike.textContent = "좋아요 " + showLike.getAttribute("data-like") +"개";
                    }else{
                        e.target.classList.toggle("blue");
                        var showLike = e.target.parentNode.parentNode.querySelector(".showLike")
                        console.log(showLike);
                        var targetLike = parseInt(showLike.getAttribute("data-like"));
                        showLike.setAttribute("data-like", targetLike+1);
                        showLike.textContent = "좋아요 " + showLike.getAttribute("data-like") +"개";
                    }
                }
            });
        });
        
        var timeLine = {
            context : []
        };
        
        var scrollLoad = {
            viewportHeight  : window.innerHeight,
            bodyHeight      : document.getElementsByTagName("body").scrollHeight,
            bodyScrollToTop : document.getElementsByTagName("body").scrollTop,
            scrollToBottom  : this.bodyHeight - (this.bodyScrollToTop + this.viewportHeight),

            loadByScroll : function(){
                console.log("load div");
                var timeline = document.querySelector("main");
                
//              div생성
                var outer = document.createElement("div");
                outer.classList.add("outer");
                    var name = document.createElement("div");
                    name.classList.add("name");
                        var profile = document.createElement("img");
                        profile.src = "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpt1/v/t1.0-1/p160x160/11181345_952554451456983_728647573232950962_n.jpg?oh=a3c37554e8ffd25983230a9feb12f406&oe=5678FB4E&__gda__=1448997760_58b7eb52750cb08b927500e3e72b9386";
                        name.appendChild(profile);
                        var context = document.createElement("div");
                            var userName = document.createElement("span");
                            userName.textContent = "USER";
                            var date = document.createElement("span");
                            var now = new Date;
                            date.textContent = 
                                (now.getMonth()+1)+"월"+(now.getDay()-1)+"일 "+now.getHours()+"시"+now.getMinutes()+"분";
                            context.appendChild(userName);
                            context.appendChild(date);
                        name.appendChild(context);
                    
                    var contentBox = document.createElement("div");
                    contentBox.classList.add("contentBox");
                        var content = document.createElement("div");
                        content.textContent = "자동생성 : endless scroll";
                        var interaction = document.createElement("div");
                            var showLike = document.createElement("span");
                            showLike.setAttribute("data-like","0");
                            showLike.textContent = "좋아요 " + showLike.getAttribute("data-like") +"개";
                            showLike.classList.add("showLike");
                            var showReply = document.createElement("span");
                            showReply.textContent = "댓글 " + 0 +"개"
                            var showShare = document.createElement("span");
                            showShare.textContent = "공유 " + 0 +"개"
                            interaction.appendChild(showLike);
                            interaction.appendChild(showReply);
                            interaction.appendChild(showShare);
                    var button = document.createElement("div");
                        var like = document.createElement("span");
                        like.textContent = "좋아요";
                        like.classList.add("likeBtn");
                        var reply = document.createElement("span");
                        reply.textContent = "댓글달기";
                        reply.classList.add("replyBtn");
                        var share = document.createElement("span");
                        share.textContent = "공유하기";
                        share.classList.add("shareBtn");
                        button.appendChild(like);
                        button.appendChild(reply);
                        button.appendChild(share);
                    button.classList.add("button");
                
                contentBox.appendChild(content);
                contentBox.appendChild(interaction);
                outer.appendChild(name);
                outer.appendChild(contentBox);
                outer.appendChild(button);
                
                outer.classList.add("node");
                timeline.appendChild(outer);
            },

            checkScroll : function(){
//                console.log("remain : " +this.scrollToBottom);
//                console.log(isNaN(this.scrollToBottom));
//                
                var body = document.querySelector("body");
                
                this.viewportHeight     = window.innerHeight;
                this.bodyHeight         = body.scrollHeight;
                this.bodyScrollToTop    = body.scrollTop;
                this.scrollToBottom     = this.bodyHeight - (this.bodyScrollToTop + this.viewportHeight);
                                
                if(this.scrollToBottom < this.viewportHeight){
                    console.log("remain : " +this.scrollToBottom);
                    return true;
                }else{
                    return false;
                }
            }
        }
    </script>
    
</head>
<body>
    <header>
        <div id="header">
            <div class="logo">
                <img src="logos-and-badges_f-logo_online/png/FB-f-Logo__white_29.png">
            </div>
            <div class="search">
                <input type="text" placeholder="궁금한 친구나 장소를 검색해보세요.">
                <div><button type="submit"></button></div>
            </div>
        </div>
    </header>
    
    <div id="container">
        <div id="lftSideBar">
            <ul>
                <li><span></span>황종성</li>
                <li><span></span>프로필 편집</li>
            </ul>
            
            <h4>즐겨찾기</h4>
            <ul>
                <li class="hasNum" data-unread="4">뉴스피드</li>
            </ul>
            
            <h4>그룹</h4>
            <ul>
                <li class="hasNum" data-unread="13">NEXT사제지간</li>
            </ul>
        </div>
        
        <div id="content">
            
            <main>
            </main>
            
            <div id="advertisement">
            </div>
            
        </div>
    </div>
    
</body>
</html>